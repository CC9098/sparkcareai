# ================================
# SparkCare AI Environment Configuration
# ================================

# Application Environment
NODE_ENV=development
PORT=5000
CLIENT_URL=http://localhost:3000

# ================================
# Database Configuration
# ================================

# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/sparkcare-ai
MONGODB_TEST_URI=mongodb://localhost:27017/sparkcare-ai-test

# Database Pool Settings
MONGODB_MAX_POOL_SIZE=10
MONGODB_TIMEOUT=30000

# ================================
# Security Configuration
# ================================

# JWT Authentication
JWT_SECRET=your-super-secure-jwt-secret-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Data Encryption
ENCRYPTION_KEY=your-32-character-encryption-key-here
ENCRYPTION_ALGORITHM=aes-256-gcm

# Password Hashing
BCRYPT_ROUNDS=12

# Session Security
SESSION_SECRET=your-session-secret-change-this-in-production

# ================================
# AI Services Configuration
# ================================

# AI Webhook Security
AI_WEBHOOK_SECRET=your-ai-webhook-secret-for-model-callbacks

# OpenAI Integration (Optional)
OPENAI_API_KEY=your-openai-api-key-for-ai-features
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2048

# Azure Cognitive Services (Optional)
AZURE_SPEECH_KEY=your-azure-speech-services-key
AZURE_SPEECH_REGION=your-azure-region

# Google Cloud Speech (Optional)
GOOGLE_CLOUD_SPEECH_KEY=your-google-cloud-speech-key
GOOGLE_CLOUD_PROJECT=your-google-cloud-project-id

# ================================
# External System Integration
# ================================

# NHS GP Connect
GP_CONNECT_API_KEY=your-gp-connect-api-key
GP_CONNECT_BASE_URL=https://api.gpconnect.nhs.uk
GP_CONNECT_CLIENT_ID=sparkcare-ai

# NHS Digital
NHS_DIGITAL_API_KEY=your-nhs-digital-api-key
NHS_DIGITAL_BASE_URL=https://api.nhs.uk

# CQC Integration
CQC_API_KEY=your-cqc-api-key
CQC_WEBHOOK_SECRET=your-cqc-webhook-secret-for-inspections

# Local Authority Systems
LOCAL_AUTHORITY_API_KEY=your-local-authority-api-key
LOCAL_AUTHORITY_WEBHOOK_SECRET=your-local-authority-webhook-secret

# Pharmacy Systems
PHARMACY_API_KEY=your-pharmacy-system-api-key
MEDICATION_WEBHOOK_SECRET=your-medication-alerts-webhook-secret

# Family Portal Integration
FAMILY_PORTAL_API_KEY=your-family-portal-api-key
FAMILY_WEBHOOK_SECRET=your-family-portal-webhook-secret

# ================================
# Email Configuration
# ================================

# SMTP Settings
SMTP_HOST=your-smtp-host.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password

# Email Templates
FROM_EMAIL=noreply@sparkcare.ai
FROM_NAME=SparkCare AI
SUPPORT_EMAIL=support@sparkcare.ai

# ================================
# File Storage Configuration
# ================================

# Local Storage (Development)
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx

# AWS S3 (Production)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=eu-west-2
AWS_S3_BUCKET=sparkcare-ai-files

# Azure Blob Storage (Alternative)
AZURE_STORAGE_ACCOUNT=your-azure-storage-account
AZURE_STORAGE_KEY=your-azure-storage-key
AZURE_STORAGE_CONTAINER=sparkcare-files

# ================================
# Logging Configuration
# ================================

# Log Levels: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info
LOG_FILE=logs/application.log
ERROR_LOG_FILE=logs/error.log
AUDIT_LOG_FILE=logs/audit.log

# Log Rotation
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# ================================
# Rate Limiting
# ================================

# API Rate Limits
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_FAILED_REQUESTS=true

# Login Attempt Limits
LOGIN_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# ================================
# Real-time Communication
# ================================

# Socket.IO Configuration
SOCKET_IO_ORIGINS=http://localhost:3000
SOCKET_IO_TRANSPORTS=websocket,polling
SOCKET_IO_PING_TIMEOUT=60000
SOCKET_IO_PING_INTERVAL=25000

# ================================
# Monitoring & Analytics
# ================================

# Application Performance Monitoring
APM_ENABLED=false
APM_SERVICE_NAME=sparkcare-ai
APM_SERVER_URL=your-apm-server-url

# Error Tracking (Sentry)
SENTRY_DSN=your-sentry-dsn-for-error-tracking

# Analytics
ANALYTICS_ENABLED=false
GOOGLE_ANALYTICS_ID=your-google-analytics-id

# ================================
# Background Jobs
# ================================

# Redis (for job queues)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password

# Background Job Settings
JOB_CONCURRENCY=5
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY=5000  # 5 seconds

# ================================
# Backup Configuration
# ================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=sparkcare-ai-backups

# ================================
# Compliance & Audit
# ================================

# Data Retention Policies
DEFAULT_DATA_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_RETENTION_DAYS=2555     # 7 years
LOG_RETENTION_DAYS=90             # 3 months

# GDPR Compliance
GDPR_DATA_CONTROLLER=Your Care Home Name
GDPR_DPO_EMAIL=dpo@yourcarehome.com
GDPR_PRIVACY_POLICY_URL=https://yourcarehome.com/privacy

# ================================
# Development & Testing
# ================================

# Development Tools
DEBUG_MODE=false
ENABLE_CORS=true
ENABLE_REQUEST_LOGGING=true

# Testing Configuration
TEST_DATABASE_URL=mongodb://localhost:27017/sparkcare-ai-test
TEST_JWT_SECRET=test-jwt-secret-for-automated-tests
SKIP_AUTH_IN_TESTS=false

# Mock External Services (for testing)
MOCK_AI_SERVICES=false
MOCK_NHS_SERVICES=false
MOCK_EMAIL_SERVICE=false

# ================================
# SSL/TLS Configuration (Production)
# ================================

# HTTPS Settings
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/ssl/certificate.pem
SSL_KEY_PATH=/path/to/ssl/private-key.pem
SSL_CA_PATH=/path/to/ssl/ca-bundle.pem

# Force HTTPS Redirect
FORCE_HTTPS=false
HSTS_MAX_AGE=31536000  # 1 year

# ================================
# Performance Optimization
# ================================

# Caching
CACHE_ENABLED=true
CACHE_TTL=3600  # 1 hour
MEMORY_CACHE_SIZE=100

# Compression
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# Static File Serving
STATIC_FILE_CACHE_MAX_AGE=86400  # 1 day

# ================================
# Feature Flags
# ================================

# AI Features
ENABLE_VOICE_TO_TEXT=true
ENABLE_AI_INSIGHTS=true
ENABLE_PREDICTIVE_ANALYTICS=false

# Integration Features
ENABLE_GP_CONNECT=false
ENABLE_NHS_DIGITAL=false
ENABLE_FAMILY_PORTAL=false

# Experimental Features
ENABLE_BETA_FEATURES=false
ENABLE_ADVANCED_REPORTING=true

# ================================
# Multi-tenancy (Future)
# ================================

# Facility Management
MULTI_FACILITY_MODE=false
DEFAULT_FACILITY_ID=default-facility

# ================================
# Localization
# ================================

# Default Language and Locale
DEFAULT_LANGUAGE=en
DEFAULT_LOCALE=en-GB
DEFAULT_TIMEZONE=Europe/London

# Supported Languages
SUPPORTED_LANGUAGES=en,cy  # English, Welsh

# ================================
# Additional Security Headers
# ================================

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# Additional Headers
ENABLE_SECURITY_HEADERS=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff